<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= @question.content %></title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>

<body class="font-noto">

    <div class="bg-[url('bg-hero.png')] bg-center bg-contain bg-no-repeat text-white font-bold pt-40 pb-10">
        <div class="ml-10">
            <p class="text-lg mx-auto">
                POSSE課題
            </p>
            <p class="text-6xl mt-3 mb-40">
                ITクイズ
            </p>
        </div>
    </div>
    <main class="w-5/6 mx-auto">
        <div id="quiz-container">
            <% if @question.present? %>
                <div class="w-full mb-32" data-quiz-id="<%= @question.id %>">
                    <p class="bg-[#0071bc] rounded-lg text-white text-3xl w-20 h-16 font-bold mb-6 flex justify-center items-center">Q<%= @question_index %></p>
                    <p class="text-xl font-bold mt-4">ポイント: <%= @question.point.point %> pt</p>
                    <p class="text-3xl font-bold leading-normal"><%= @question.content %></p>
                    <% if @question.image.is_a?(ActiveStorage::Attached::One) && @question.image.attached? %>
                        <%= image_tag @question.image, alt: "milmil", class: "w-1/5" %>
                    <% else %>
                        <%= image_tag 'quiz02.png', alt: 'default image', class: 'w-1/5' %> <!-- デフォルト画像 -->
                    <% end %>
                    <div class="w-full my-8 flex justify-center gap-4">
                        <% @question.choices.each do |choice| %>
                            <%= form_with url: user_questions_path, method: :post, local: true do %>
                                <p class="choice w-1/3 bg-gray-100 p-4 text-center flex items-center font-bold border-4 rounded-lg border-gray-200 cursor-pointer hidden"
                                    data-is-valid="<%= choice.is_valid %>">
                                    <%= choice.name %>
                                </p>
                                <%= hidden_field_tag "user_question[user_id]", @user['id'] %>
                                <%= hidden_field_tag "user_question[question_id]", @question.id %>
                                <%= hidden_field_tag "user_question[result]", choice.is_valid %>
                                <%= hidden_field_tag "user_question[is_first]", false %>
                                <%= submit_tag choice.name, class: "btn btn-primary" %>
                            <% end %>
                        <% end %>
                    </div>
                    <% if @question.supplement.present? %>
                        <p class="flex items-center rounded-2xl bg-gray-200 w-full h-20 bg-no-repeat pl-8 font-bold text-lg bg-bottom-[50%] gap-4 mt-2">
                            <%= image_tag "icon-note.png", class: "w-6 py-8" %>
                            <%= @question.supplement %>
                        </p>
                    <% end %>
                </div>
            <% else %>
                <p>質問が見つかりませんでした。</p>
            <% end %>
        </div>
    </main>
    <footer class="mx-auto">
        <%= image_tag "logo.png", class: "mx-auto" %>
        <div class="text-center mt-6">
            <a href="">POSSE公式サイト</a>
        </div>
        <ul class="flex justify-center mt-4">
            <li class="w-12 h-12 ml-5 rounded-full bg-white shadow-xs border flex justify-center items-center">
                <a href="https://twitter.com/posse_program">
                    <%= image_tag "icon-twitter.png", class: "w-6 h-5" %>
                </a>
            </li>
            <li class="w-12 h-12 ml-4 mr-5 rounded-full bg-white shadow-xs border flex justify-center items-center">
                <a href="https://www.instagram.com/posse_programming/">
                    <%= image_tag "icon-instagram.png", class: "w-6 h-6" %>
                </a>
            </li>
        </ul>
        <div class="text-center mb-8">
            <small>©︎2024 POSSE</small>
        </div>
    </footer>
</body>

</html> 